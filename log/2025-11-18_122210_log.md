# 2025-11-18 12:22:10 自動掃描與修正紀錄

- 作者: GitHub Copilot (自動操作)
- 事件: 讓專案可被匯入 (import) 且在缺少外部套件時仍能載入；新增 fallback/stub 與 package-safe imports。
- 受影響檔案:
  - `video_pipeline/main.py`:
    - 將 `fastapi` import 攔截，提供可匯入的 stub（含 `FastAPI.post` / `get` 裝飾器、`BackgroundTasks`、`UploadFile`、`HTTPException`、`JSONResponse`）。
    - 改用 package-qualified imports (例如 `video_pipeline.config`) 並在無法時 fallback 到本地 import。
    - 新增 `_import` helper，並在找不到實際 service class 時回傳 minimal stub 類別，以避免匯入時發生 AttributeError / ModuleNotFoundError。
    - 將若干型別註記改為 `Any` 以避免在匯入階段因實作順序造成類型錯誤。
  - `video_pipeline/config.py`:
    - 對 `pydantic_settings`/`pydantic` 的 import 加入 fallback，若二者皆缺少則提供最小 `BaseSettings` 實作以從環境變數或類別預設讀值。

- 變更原因（簡述）:
  - 在開發環境或 CI 中未必安裝所有第三方套件（例如 `fastapi`, `pydantic-settings`），但我們需要能做靜態掃描與部分本地執行。這些修改讓專案在缺乏某些外部套件時仍可被匯入做靜態檢查或局部執行。

- 重要提醒:
  - 這些 stub 與 fallback 僅用於開發/掃描階段。若要在實際運行服務，請務必安裝並使用真實的 `fastapi`, `pydantic-settings`, `openai`, `httpx` 等套件，並移除或偵測執行環境是否使用 stub 行為。

(自動產生日誌)
